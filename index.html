<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>amaoto</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <!-- HTMLファイル内の<head>セクション -->
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* スタイルの設定 */
    body {
      margin: 0;
      padding: 0;
      background: url('img/bg.jpg') center/cover no-repeat;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
      font-family: 'Noto Serif JP', serif;
    }
  </style>
</head>
<body>

<div class="content">
  <div id="logo-container">
    <img id="app-logo" src="img/amaoto.svg" alt="logo">
  </div>

    <!-- 地図アイコン -->
    <div class="left-icon icon-font" onclick="toMap()">
        <i class="fa fa-map"></i>
    </div>
    <!-- 再生アイコン -->
    <div class="center-icon icon-font">
        <i id="playButton" class="fas fa-play" style="text-align: center;"></i>
    </div>
    <!-- カメラアイコン -->
    <div class="right-icon icon-font" id="openModalButton">
        <i class="fa fa-video"></i>
    </div>
</div>

<!-- モーダルウィンドウのHTML -->
<div class="modal">
  <div class="modal_bg js-modal-close"></div>
  <div class="modalScroll">
    <div class="modal_content">
        <!-- YouTubeの埋め込みコードをここに追加 -->
        <iframe id="youtubePlayer" width="98%" height="380px" frameborder="0" allowfullscreen></iframe>
      </div>
  </div>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
console.log("処理開始")

function toMap() {
  window.location.href = "map.html";
}

// YouTube動画のID（URLの最後の部分）を指定
//var youtubeVideoId = 'TvvG4YfT59Y';
var youtubeVideoId = 'pmTFyDvr4l4';

$("#openModalButton").on("click", function () {
  console.log("modal-fadein");
  $(".modal").fadeIn();
  var youtubePlayer = document.getElementById('youtubePlayer');
  youtubePlayer.src = 'https://www.youtube.com/embed/' + youtubeVideoId;
});

$(".js-modal-close").on("click", function () {
  console.log("modal-fadeout");
  $(".modal").fadeOut();
  var youtubePlayer = document.getElementById('youtubePlayer');
  youtubePlayer.src = '';
  return false;
});

// // モーダルウィンドウを開く
// document.getElementById('openModalButton').addEventListener('click', function () {
//   var modal = document.getElementById('myModal');
//   var youtubePlayer = document.getElementById('youtubePlayer');
//   youtubePlayer.src = 'https://www.youtube.com/embed/' + youtubeVideoId;
//   modal.style.display = 'block';
// });

// // モーダルウィンドウを閉じる
// document.getElementById('closeModalButton').addEventListener('click', function () {
//   var modal = document.getElementById('myModal');
//   var youtubePlayer = document.getElementById('youtubePlayer');
//   youtubePlayer.src = '';
//   modal.style.display = 'none';
// });

//気象情報を取得
function rain(){
    // OpenWeatherMap APIキー
    const apiKey = 'APIKEY';
    // 位置情報（緯度と経度）
    const latitude = 35.6895; // 例: 東京の緯度
    const longitude = 139.6917; // 例: 東京の経度

    // API呼び出し
    const apiUrl = `https://api.openweathermap.org/data/3.0/onecall?lat=${latitude}&lon=${longitude}&appid=${apiKey}`;
    fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
        console.log(data);
        if (data.weather && data.weather[0] && data.weather[0].main === 'Rain') {
        console.log('降水があります');
        } else {
        console.log('降水はありません');
        }
    })
    .catch(error => {
        console.error('API呼び出しエラー:', error);
    });
  }

  const playButton = document.getElementById('playButton');
  let music = null;
  let soundEffects = {};
  soundEffects[0] = new Audio('audio/rain01.mp3');
  soundEffects[1] = new Audio('audio/rain02.mp3');
  soundEffects[2] = new Audio('audio/rain03.mp3');
  soundEffects[3] = new Audio('audio/rain04.mp3');
  let cnt = 0;

  playButton.addEventListener('click', function() {
    if (music == null || music.paused) {
      cnt++;
      music = soundEffects[cnt%4];
      music.play();
      playButton.classList.remove('fa-play');
      playButton.classList.add('fa-pause');
    } else {
      music.pause();
      playButton.classList.remove('fa-pause');
      playButton.classList.add('fa-play');
    }
});
    

</script>
</body>
</html>
